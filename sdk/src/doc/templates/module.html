{{! Copyright Ion Fusion contributors. All rights reserved. }}
{{! SPDX-License-Identifier: Apache-2.0 }}
{{!
  CSS hierarchy:
    section.overview
    nav.submodules
      oneliner
    nav.exports
    section.export
      name
      kind
      doc
        oneliner -- presently unused, intended to be text description
        body -- should have usage/synopsis broken out
        also
}}
{{<common}}
  {{$moreHead}}
    <link href='module.css' rel='stylesheet'></link>
  {{/moreHead}}
  {{$title}}{{entity.identity.absolutePath}}{{/title}}
  {{$main}}
    <h1 class="headline">Module {{#entity.identity}}{{>breadcrumbs}}{{/entity.identity}}</h1>

    <section class='overview'>
      {{#entity.moduleDocs.overview}}{{#md}}{{&.}}{{/md}}{{/entity.moduleDocs.overview}}
    </section>

    {{^entity.submodules.empty}}
      <nav class='submodules'>
        <h2>Submodules</h2>
        <ul>
        {{#entity.submodules}}
          <li>{{<module-link}}{{$id}}{{identity}}{{/id}}{{$link}}{{identity.baseName}}{{/link}}{{/module-link}}
            {{#moduleDocs.oneLiner}} &ndash; <span class='oneliner'>{{#md}}{{&.}}{{/md}}</span>{{/moduleDocs.oneLiner}}
          </li>
        {{/entity.submodules}}
        </ul>
      </nav>
    {{/entity.submodules.empty}}

    {{^entity.exports.empty}}
      <nav class='exports'>
        <h2>Exported Bindings</h2>
        <ol>
          {{#entity.exports}}
            <li>{{<binding-link}}{{$id}}{{moduleId}}{{/id}}{{$name}}{{name}}{{/name}}{{/binding-link}}</li>
          {{/entity.exports}}
        </ol>
      </nav>

      {{#entity.exports}}
        <section class='export' id='{{name}}'><span class='name'>{{name}}</span>
          {{#docs.kind}}<span class='kind'>{{toString.toLowerCase}}</span>{{/docs.kind}}
          <div class='doc'>
            <div class='body'>
              {{#docs.usage}}{{#md}}{{&nl}}{{&.}}{{&nl}}{{/md}}{{/docs.usage}}
              {{#docs.body}}{{#md}}{{&nl}}{{&.}}{{&nl}}{{/md}}{{/docs.body}}
            </div>
            {{^alsoProvidedBy.empty}}
               <aside class='also'>Also provided by
               {{#alsoProvidedBy}}{{>export-link}}, {{/alsoProvidedBy}}
               </aside>
            {{/alsoProvidedBy.empty}}
          </div>
        </section>
      {{/entity.exports}}
    {{/entity.exports.empty}}
  {{/main}}
{{/common}}